{
    "family": "test-logger-service",
    "networkMode": "host",
    "requiresCompatibilities": [
        "EC2"
    ],
    "containerDefinitions": [
        {
            "name": "logger-service",
            "image": "beblue/logger-service",
            "cpu": 256,
            "memory": 1792,
            "environment": [
                {
                    "name": "ENVIRONMENT",
                    "value": "development"
                },
                {
                    "name": "POSTGRES_DB_HOST",
                    "value": "postgre-dev.database.beblue.com.br"
                },
                {
                    "name": "POSTGRES_DB_NAME",
                    "value": "logger_service"
                },
                {
                  "name": "POSTGRES_DB_USER",
                  "value": "logger_service"
                },
                {
                    "name": "POSTGRES_DB_PASSWORD",
                    "value": "pHuteW=c*6sp"
                },
                {
                    "name": "POSTGRES_DB_PORT",
                    "value": "5432"
                },
                {
                    "name": "DD_API_KEY",
                    "value": "12f2a1e88301811b4815d20bb562ab8a"
                }
            ],
            "healthCheck": {
                "invertal": 30,
                "timeout": 2,
                "startPeriod": 30,
                "retries": 3,
                "command": [
                    "CMD-SHELL",
                    "test \"passing\" = $(curl -sf http://localhost:8500/v1/agent/checks | jq -r \".[\\\"service:$(cat /logger/app.properties)\\\"].Status\")"
                ]
            },
            "logConfiguration": {
                "logDriver": "fluentd",
                "options": {
                    "fluentd-address": "services.dev.beblue:26224",
                    "fluentd-sub-second-precision": true,
                    "tag": "log.inline.json"
                }
            }
        }
    ]
}